{"ast":null,"code":"var _jsxFileName = \"/home/aayush/Desktop/Customer-service-automation/CustomerServiceAutomation/FrontEnd_CSA/customer_service_automation/src/ProductSelect.js\";\nimport React, { useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport './ProductSelect.css';\nimport { Link, useParams, useHistory } from \"react-router-dom\";\nconst url = \"http://127.0.0.1:8000\";\n\nfunction ProductSelect() {\n  const history = useHistory();\n  const params = useParams();\n  const [ProductData, setProduct] = useState([]);\n  const [CartData, setCartData] = useState([]);\n  fetch(url + '/productdata').then(response => {\n    //  console.log(response.json());\n    return response.json();\n  }).then(data => {\n    setProduct(data); //  console.log(data);\n  });\n\n  const placeOrder = () => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(CartData)\n    };\n    fetch(url + '/placeorder', requestOptions).then(response => response.json()).then(data => {\n      history.push(\"/checkout/\" + data[\"order_id\"]);\n    });\n\n    const addData = item => {\n      const index = CartData.findIndex(data => data.product_id === item.product_id);\n\n      if (index >= 0) {\n        CartData[index][\"product_quantity\"] += 1;\n        setCartData(CartData);\n      } else {\n        setCartData([...CartData, {\n          \"product_quantity\": 1,\n          \"user_id\": params.uid,\n          \"product_id\": item.product_id\n        }]);\n      }\n    };\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, order_id), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => placeOrder(),\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }\n    }, \"Checkout\")), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 13\n      }\n    }, params.uid), ProductData.map(function (item, i) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"product__img\",\n        src: item.logo,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product__desc\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 21\n        }\n      }, item.description), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"product__qty\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }\n      }, \"Select Quantity\"), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 29\n        }\n      }), /*#__PURE__*/React.createElement(\"input\", {\n        type: \"text\",\n        defaultValue: \"0\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 29\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 29\n        }\n      }, \"Quantity Available\"), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"available\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }\n      }, item.quantity)), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: () => addData(item),\n        variant: \"contained\",\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 25\n        }\n      }, \"ADD\"))));\n    }));\n  };\n}\n\nexport default ProductSelect;","map":{"version":3,"sources":["/home/aayush/Desktop/Customer-service-automation/CustomerServiceAutomation/FrontEnd_CSA/customer_service_automation/src/ProductSelect.js"],"names":["React","useState","Button","Link","useParams","useHistory","url","ProductSelect","history","params","ProductData","setProduct","CartData","setCartData","fetch","then","response","json","data","placeOrder","requestOptions","method","headers","body","JSON","stringify","push","addData","item","index","findIndex","product_id","uid","order_id","map","i","logo","description","quantity"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAO,qBAAP;AACA,SACIC,IADJ,EAEIC,SAFJ,EAEcC,UAFd,QAGS,kBAHT;AAKA,MAAMC,GAAG,GAAG,uBAAZ;;AAIA,SAASC,aAAT,GAAyB;AACrB,QAAMC,OAAO,GAAGH,UAAU,EAA1B;AACA,QAAMI,MAAM,GAAGL,SAAS,EAAxB;AACA,QAAM,CAACM,WAAD,EAAaC,UAAb,IAA2BV,QAAQ,CAAC,EAAD,CAAzC;AACA,QAAM,CAACW,QAAD,EAAUC,WAAV,IAAyBZ,QAAQ,CAAC,EAAD,CAAvC;AACIa,EAAAA,KAAK,CAACR,GAAG,GAAC,cAAL,CAAL,CACOS,IADP,CACaC,QAAD,IAAc;AACnB;AACC,WAAOA,QAAQ,CAACC,IAAT,EAAP;AACA,GAJR,EAKQF,IALR,CAKcG,IAAD,IAAQ;AACZP,IAAAA,UAAU,CAACO,IAAD,CAAV,CADY,CAEb;AACA,GARR;;AASJ,QAAMC,UAAU,GAAG,MAAK;AACxB,UAAMC,cAAc,GAAG;AACfC,MAAAA,MAAM,EAAE,MADO;AAEfC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFM;AAGfC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAeb,QAAf;AAHS,KAAvB;AAKAE,IAAAA,KAAK,CAACR,GAAG,GAAC,aAAL,EAAoBc,cAApB,CAAL,CACCL,IADD,CACMC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EADlB,EAECF,IAFD,CAEMG,IAAI,IAAI;AACVV,MAAAA,OAAO,CAACkB,IAAR,CAAa,eAAaR,IAAI,CAAC,UAAD,CAA9B;AAEH,KALD;;AAQA,UAAMS,OAAO,GAAIC,IAAD,IAAU;AACtB,YAAMC,KAAK,GAAGjB,QAAQ,CAACkB,SAAT,CACTZ,IAAD,IAAUA,IAAI,CAACa,UAAL,KAAoBH,IAAI,CAACG,UADzB,CAAd;;AAIA,UAAGF,KAAK,IAAI,CAAZ,EAAc;AACVjB,QAAAA,QAAQ,CAACiB,KAAD,CAAR,CAAgB,kBAAhB,KAAuC,CAAvC;AACAhB,QAAAA,WAAW,CAACD,QAAD,CAAX;AACH,OAHD,MAII;AACAC,QAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAa;AAAC,8BAAmB,CAApB;AAAsB,qBAAUH,MAAM,CAACuB,GAAvC;AAA2C,wBAAaJ,IAAI,CAACG;AAA7D,SAAb,CAAD,CAAX;AACH;AAEJ,KAbD;;AAcA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAK,MAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAME,QAAN,CADJ,eAEQ,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAE,MAAMd,UAAU,EAAjC;AAAqC,MAAA,OAAO,EAAC,WAA7C;AAAyD,MAAA,KAAK,EAAC,SAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFR,CADJ,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAMV,MAAM,CAACuB,GAAb,CAPJ,EAQKtB,WAAW,CAACwB,GAAZ,CAAgB,UAAUN,IAAV,EAAeO,CAAf,EAAiB;AAC9B,0BACA;AAAK,QAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAK,QAAA,SAAS,EAAC,cAAf;AAA8B,QAAA,GAAG,EAAEP,IAAI,CAACQ,IAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADJ,eAEI;AAAK,QAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAgCR,IAAI,CAACS,WAArC,CAFJ,eAGI;AAAK,QAAA,SAAS,EAAC,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BADJ,eAEI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFJ,eAGI;AAAO,QAAA,IAAI,EAAC,MAAZ;AAAmB,QAAA,YAAY,EAAC,GAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAHJ,CADJ,eAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADJ,eAEI;AAAG,QAAA,SAAS,EAAC,WAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA0BT,IAAI,CAACU,QAA/B,CAFJ,CANJ,eAUI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACA,oBAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAMX,OAAO,CAACC,IAAD,CAA9B;AAAsC,QAAA,OAAO,EAAC,WAA9C;AAA0D,QAAA,KAAK,EAAC,SAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADA,CAVJ,CAHJ,CADA;AAqBH,KAtBA,CARL,CADJ;AAkCK,GA9DL;AA8DM;;AAEV,eAAerB,aAAf","sourcesContent":["import React, { useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport './ProductSelect.css';\r\nimport {\r\n    Link,\r\n    useParams,useHistory\r\n  } from \"react-router-dom\";\r\n\r\nconst url = \"http://127.0.0.1:8000\";\r\n\r\n\r\n\r\nfunction ProductSelect() {\r\n    const history = useHistory();\r\n    const params = useParams();\r\n    const [ProductData,setProduct] = useState([]);\r\n    const [CartData,setCartData] = useState([]);\r\n        fetch(url+'/productdata')\r\n              .then((response) => {\r\n               //  console.log(response.json());\r\n                return response.json();\r\n               })\r\n               .then((data)=>{\r\n                 setProduct(data);\r\n                //  console.log(data);\r\n               });\r\n    const placeOrder = ()=> {\r\n    const requestOptions = {    \r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(CartData)\r\n        };\r\n    fetch(url+'/placeorder', requestOptions)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        history.push(\"/checkout/\"+data[\"order_id\"]);\r\n    \r\n    })\r\n  \r\n\r\n    const addData = (item) => {\r\n        const index = CartData.findIndex(\r\n            (data) => data.product_id === item.product_id\r\n          );\r\n       \r\n        if(index >= 0){\r\n            CartData[index][\"product_quantity\"] += 1\r\n            setCartData(CartData);\r\n        }\r\n        else{\r\n            setCartData([...CartData,{\"product_quantity\":1,\"user_id\":params.uid,\"product_id\":item.product_id}])\r\n        }\r\n        \r\n    }\r\n    return (\r\n        <div>\r\n            <div className=\"checkout\">\r\n                <div>{order_id}</div>\r\n                    <Button onClick={() => placeOrder()} variant=\"contained\" color=\"primary\" >\r\n                        Checkout\r\n                    </Button>\r\n                </div>\r\n            <div>{params.uid}</div>\r\n            {ProductData.map(function (item,i){\r\n                return(\r\n                <div className=\"product\">\r\n                    <img className=\"product__img\" src={item.logo}></img>\r\n                    <div className=\"product__desc\">{item.description}</div>\r\n                    <div className=\"product__qty\">\r\n                        <div>\r\n                            <label>Select Quantity</label>\r\n                            <br></br>\r\n                            <input type=\"text\" defaultValue=\"0\" ></input>\r\n                        </div>\r\n                        <div>\r\n                            <label>Quantity Available</label>\r\n                            <p className=\"available\">{item.quantity}</p>\r\n                        </div>\r\n                        <div>\r\n                        <Button onClick={() => addData(item)} variant=\"contained\" color=\"primary\">\r\n                        ADD</Button>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>)\r\n            })}\r\n        </div>\r\n    )\r\n        }}\r\n\r\nexport default ProductSelect\r\n"]},"metadata":{},"sourceType":"module"}