{"ast":null,"code":"var _jsxFileName = \"/home/aayush/Desktop/Customer-service-automation/CustomerServiceAutomation/FrontEnd_CSA/customer_service_automation/src/ProductSelect.js\";\nimport React, { useEffect, useState } from 'react';\nimport Button from '@material-ui/core/Button';\nimport './ProductSelect.css';\nimport { Link, useParams, useHistory } from \"react-router-dom\";\nconst url = \"http://127.0.0.1:8000\";\n\nfunction ProductSelect() {\n  const history = useHistory();\n  const params = useParams();\n  const [ProductData, setProduct] = useState([]);\n  const [Total, setTotal] = useState(0);\n  const [CartData, setCartData] = useState([]);\n  const [Count, setCount] = useState({});\n  useEffect(() => {\n    fetch(url + '/productdata').then(response => {\n      //  console.log(response.json());\n      return response.json();\n    }).then(data => {\n      setProduct(data); //  console.log(data);\n    });\n  }, []);\n\n  const placeOrder = () => {\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(CartData)\n    };\n    fetch(url + '/placeorder', requestOptions).then(response => response.json()).then(data => {\n      history.push(\"/checkout/\" + data[\"order_id\"] + \"/\" + Total);\n    });\n  };\n\n  const addData = item => {\n    const index = CartData.findIndex(data => data.product_id === item.product_id);\n\n    if (index >= 0) {\n      CartData[index][\"product_quantity\"] += 1;\n      setCartData(CartData);\n    } else {\n      setCartData([...CartData, {\n        \"product_quantity\": 1,\n        \"user_id\": params.uid,\n        \"product_id\": item.product_id\n      }]);\n    }\n\n    setCount[item.product_id] += 1;\n    setTotal(Total + item.price);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout__btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: () => placeOrder(),\n    variant: \"contained\",\n    color: \"primary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 21\n    }\n  }, \"Checkout\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"user__id\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 39\n    }\n  }, \"User Id\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 55\n    }\n  }, params.uid)), ProductData.map(function (item, i) {\n    Count[item.product_id] = 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"product__img\",\n      src: item.logo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product__desc\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }\n    }, item.description), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"product__qty\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 29\n      }\n    }, \"Select Quantity\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 29\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"exis_qty\",\n      type: \"text\",\n      value: Count[item.product_id],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 29\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 29\n      }\n    }, \"Quantity Available\"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"available\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 29\n      }\n    }, item.quantity)), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button__div\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => addData(item),\n      variant: \"contained\",\n      color: \"primary\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }\n    }, \"ADD\"))));\n  }));\n}\n\nexport default ProductSelect;","map":{"version":3,"sources":["/home/aayush/Desktop/Customer-service-automation/CustomerServiceAutomation/FrontEnd_CSA/customer_service_automation/src/ProductSelect.js"],"names":["React","useEffect","useState","Button","Link","useParams","useHistory","url","ProductSelect","history","params","ProductData","setProduct","Total","setTotal","CartData","setCartData","Count","setCount","fetch","then","response","json","data","placeOrder","requestOptions","method","headers","body","JSON","stringify","push","addData","item","index","findIndex","product_id","uid","price","map","i","logo","description","quantity"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport Button from '@material-ui/core/Button';\r\nimport './ProductSelect.css';\r\nimport {\r\n    Link,\r\n    useParams,useHistory\r\n  } from \"react-router-dom\";\r\n\r\nconst url = \"http://127.0.0.1:8000\";\r\n\r\n\r\n\r\nfunction ProductSelect() {\r\n    const history = useHistory();\r\n    const params = useParams();\r\n    const [ProductData,setProduct] = useState([]);\r\n    const [Total,setTotal] = useState(0);\r\n    const [CartData,setCartData] = useState([]);\r\n    const [Count,setCount] = useState({});\r\n    useEffect(() => {\r\n        \r\n            fetch(url+'/productdata')\r\n              .then((response) => {\r\n               //  console.log(response.json());\r\n                return response.json();\r\n               })\r\n               .then((data)=>{\r\n                 setProduct(data);\r\n                //  console.log(data);\r\n               });\r\n    }, [])\r\n    const placeOrder = ()=> {\r\n    const requestOptions = {    \r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(CartData)\r\n        };\r\n    fetch(url+'/placeorder', requestOptions)\r\n    .then(response => response.json())\r\n    .then(data => {\r\n        history.push(\"/checkout/\"+data[\"order_id\"] + \"/\" + Total);\r\n    \r\n    })}\r\n  \r\n    \r\n\r\n    const addData = (item) => {\r\n    \r\n    \r\n\r\n        const index = CartData.findIndex(\r\n            (data) => data.product_id === item.product_id\r\n          );\r\n       \r\n        if(index >= 0){\r\n            CartData[index][\"product_quantity\"] += 1\r\n            setCartData(CartData);\r\n            \r\n        }\r\n        else{\r\n            setCartData([...CartData,{\"product_quantity\":1,\"user_id\":params.uid,\"product_id\":item.product_id}])\r\n        }\r\n        setCount[item.product_id] += 1\r\n        setTotal(Total + item.price);\r\n    }\r\n    return (\r\n        <div>\r\n            <div className=\"checkout__btn\">\r\n                    <Button onClick={() => placeOrder()} variant=\"contained\" color=\"primary\" >\r\n                        Checkout\r\n                    </Button>\r\n                </div>\r\n            <div className=\"user__id\"><h2>User Id</h2><p>{params.uid}</p></div>\r\n            {ProductData.map(function (item,i){\r\n                Count[item.product_id] = 0;\r\n                return(\r\n                <div className=\"product\">\r\n                    <img className=\"product__img\" src={item.logo}></img>\r\n                    <div className=\"product__desc\">{item.description}</div>\r\n                    <div className=\"product__qty\">\r\n                        <div>\r\n                            <label>Select Quantity</label>\r\n                            <br></br>\r\n                            <input className=\"exis_qty\" type=\"text\" value={Count[item.product_id]}></input>\r\n                        </div>\r\n                        <div>\r\n                            <label>Quantity Available</label>\r\n                            <p className=\"available\">{item.quantity}</p>\r\n                        </div>\r\n                        <div className=\"button__div\">\r\n                        <Button onClick={() => addData(item)} variant=\"contained\" color=\"primary\">\r\n                            ADD\r\n                        </Button>\r\n                        </div>\r\n                    </div>\r\n                    \r\n                </div>)\r\n            })}\r\n        </div>\r\n    )\r\n        \r\n    }\r\n\r\nexport default ProductSelect\r\n"]},"metadata":{},"sourceType":"module"}